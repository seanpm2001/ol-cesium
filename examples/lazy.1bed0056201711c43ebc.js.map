{"version":3,"file":"lazy.1bed0056201711c43ebc.js","mappings":"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","sources":["webpack://ol-cesium/webpack/runtime/chunk loaded","webpack://ol-cesium/./src/olcs/contrib/LazyLoader.js","webpack://ol-cesium/./src/olcs/contrib/Manager.js","webpack://ol-cesium/./examples/lazy.js","webpack://ol-cesium/webpack/bootstrap","webpack://ol-cesium/webpack/runtime/define property getters","webpack://ol-cesium/webpack/runtime/hasOwnProperty shorthand","webpack://ol-cesium/webpack/runtime/runtimeId","webpack://ol-cesium/webpack/runtime/jsonp chunk loading","webpack://ol-cesium/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\n * @module olcs.contrib.LazyLoader\n */\nexport default class LazyLoader {\n  /**\n   * @param {string} url\n   * @api\n   */\n  constructor(url) {\n    /**\n     * @type {Promise<undefined>}\n     * @protected\n     */\n    this.promise;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = url;\n  }\n\n  /**\n   * @return {Promise<undefined>}\n   * @api\n   */\n  load() {\n    if (!this.promise) {\n      // not yet loading\n      this.promise = new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.onload = () => resolve();\n        script.onerror = () => reject();\n        document.head.appendChild(script);\n        script.src = this.url_;\n      });\n    }\n    return this.promise;\n  }\n}\n","/**\n * @module olcs.contrib.Manager\n */\nimport olcsContribLazyLoader from '../contrib/LazyLoader.js';\nimport OLCesium from '../OLCesium.ts';\nimport {resetToNorthZenith, rotateAroundBottomCenter, computeSignedTiltAngleOnGlobe, pickBottomPoint, setHeadingUsingBottomCenter, limitCameraToBoundingSphere} from '../core.ts';\nimport {toRadians} from '../math.js';\nimport olObservable from 'ol/Observable.js';\n\n\n/**\n * @typedef {Object} ManagerOptions\n * @property {import('ol/Map.js').default} map\n * @property {import('ol/extent.js').Extent} [cameraExtentInRadians]\n * @property {string} [cesiumIonDefaultAccessToken]\n */\n\n\nconst Manager = class extends olObservable {\n  /**\n   * @param {string} cesiumUrl\n   * @param {olcsx.contrib.ManagerOptions} options\n   * @api\n   */\n  constructor(cesiumUrl, {map, cameraExtentInRadians, cesiumIonDefaultAccessToken} = {}) {\n\n    super();\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.cesiumUrl_ = cesiumUrl;\n\n    /**\n     * @type {ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.Extent}\n     * @protected\n     */\n    this.cameraExtentInRadians = cameraExtentInRadians || null;\n\n    /**\n     * @private\n     * @type {Cesium.BoundingSphere}\n     */\n    this.boundingSphere_;\n\n    /**\n     * @type {Promise.<olcs.OLCesium>}\n     * @private\n     */\n    this.promise_;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.cesiumIonDefaultAccessToken_ = cesiumIonDefaultAccessToken;\n\n    /**\n     * @type {olcs.OLCesium}\n     * @protected\n     */\n    this.ol3d;\n\n    /**\n     * @const {number} Tilt angle in radians\n     * @private\n     */\n    this.cesiumInitialTilt_ = toRadians(50);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogDensity = 0.0001;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogSSEFactor = 25;\n\n    /**\n     * Limit the minimum distance to the terrain to 2m.\n     * @protected\n     * @type {number}\n     */\n    this.minimumZoomDistance = 2;\n\n    /**\n     * Limit the maximum distance to the earth to 10'000km.\n     * @protected\n     * @type {number}\n     */\n    this.maximumZoomDistance = 10000000;\n\n    // when closer to 3000m, restrict the available positions harder\n    /**\n     * @protected\n     * @param {number} height\n     */\n    this.limitCameraToBoundingSphereRatio = height => (height > 3000 ? 9 : 3);\n  }\n\n\n  /**\n   * @return {Promise.<olcs.OLCesium>}\n   */\n  load() {\n    if (!this.promise_) {\n      const cesiumLazyLoader = new olcsContribLazyLoader(this.cesiumUrl_);\n      this.promise_ = cesiumLazyLoader.load().then(() => this.onCesiumLoaded());\n    }\n    return this.promise_;\n  }\n\n\n  /**\n   * @protected\n   * @return {olcs.OLCesium}\n   */\n  onCesiumLoaded() {\n    if (this.cameraExtentInRadians) {\n      const rect = new Cesium.Rectangle(...this.cameraExtentInRadians);\n      // Set the fly home rectangle\n      Cesium.Camera.DEFAULT_VIEW_RECTANGLE = rect;\n      this.boundingSphere_ = Cesium.BoundingSphere.fromRectangle3D(rect, Cesium.Ellipsoid.WGS84, 300); // lux mean height is 300m\n    }\n\n    if (this.cesiumIonDefaultAccessToken_) {\n      Cesium.Ion.defaultAccessToken = this.cesiumIonDefaultAccessToken_;\n    }\n\n    this.ol3d = this.instantiateOLCesium();\n    const scene = this.ol3d.getCesiumScene();\n    this.configureForUsability(scene);\n    this.configureForPerformance(scene);\n    this.dispatchEvent('load');\n    return this.ol3d;\n  }\n\n\n  /**\n   * Application code should override this method.\n   * @return {olcs.OLCesium}\n   */\n  instantiateOLCesium() {\n    console.assert(this.map);\n    const ol3d = new OLCesium({map: this.map});\n    const scene = ol3d.getCesiumScene();\n    if (Cesium.createWorldTerrain) {\n      const terrainProvider = Cesium.createWorldTerrain();\n      scene.terrainProvider = terrainProvider;\n    } else {\n      // v107+\n      Cesium.createWorldTerrainAsync().then(tp => scene.terrainProvider = tp);\n    }\n\n    return ol3d;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForPerformance(scene) {\n    const fog = scene.fog;\n    fog.enabled = true;\n    fog.density = this.fogDensity;\n    fog.screenSpaceErrorFactor = this.fogSSEFactor;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForUsability(scene) {\n    const sscController = scene.screenSpaceCameraController;\n    sscController.minimumZoomDistance = this.minimumZoomDistance;\n    sscController.maximumZoomDistance = this.maximumZoomDistance;\n\n    // Do not see through the terrain. Seeing through the terrain does not make\n    // sense anyway, except for debugging\n    scene.globe.depthTestAgainstTerrain = true;\n\n    // Use white instead of the black default colour for the globe when tiles are missing\n    scene.globe.baseColor = Cesium.Color.WHITE;\n    scene.backgroundColor = Cesium.Color.WHITE;\n\n    if (this.boundingSphere_) {\n      scene.postRender.addEventListener(this.limitCameraToBoundingSphere.bind(this));\n    }\n    // Stop rendering Cesium when there is nothing to do. This drastically reduces CPU/GPU consumption.\n    this.ol3d.enableAutoRenderLoop();\n  }\n\n  /**\n   * Constrain the camera so that it stays close to the bounding sphere of the map extent.\n   * Near the ground the allowed distance is shorter.\n   * @protected\n   */\n  limitCameraToBoundingSphere() {\n    const scene = this.ol3d.getCesiumScene();\n    limitCameraToBoundingSphere(scene.camera, this.boundingSphere_, this.limitCameraToBoundingSphereRatio);\n  }\n\n  /**\n   * Enable or disable ol3d with a default animation.\n   * @export\n   * @return {Promise<undefined>}\n   */\n  toggle3d() {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      if (is3DCurrentlyEnabled) {\n        // Disable 3D\n        console.assert(this.map);\n        return resetToNorthZenith(this.map, scene).then(() => {\n          ol3d.setEnabled(false);\n          this.dispatchEvent('toggle');\n        });\n      } else {\n        // Enable 3D\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n        return rotateAroundBottomCenter(scene, this.cesiumInitialTilt_);\n      }\n    });\n  }\n\n\n  /**\n   * Enable ol3d with a view built from parameters.\n   *\n   * @export\n   * @param {number} lon\n   * @param {number} lat\n   * @param {number} elevation\n   * @param {number} headingDeg Heading value in degrees.\n   * @param {number} pitchDeg Pitch value in degrees.\n   * @returns {Promise<undefined>}\n   */\n  set3dWithView(lon, lat, elevation, headingDeg, pitchDeg) {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const destination = Cesium.Cartesian3.fromDegrees(lon, lat, elevation);\n      const heading = Cesium.Math.toRadians(headingDeg);\n      const pitch = Cesium.Math.toRadians(pitchDeg);\n      const roll = 0;\n      const orientation = {heading, pitch, roll};\n\n      if (!is3DCurrentlyEnabled) {\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n      }\n\n      camera.setView({\n        destination,\n        orientation\n      });\n    });\n  }\n\n\n  /**\n   * @export\n   * @return {boolean}\n   */\n  is3dEnabled() {\n    return !!this.ol3d && this.ol3d.getEnabled();\n  }\n\n\n  /**\n   * @return {number}\n   */\n  getHeading() {\n    return this.map ? this.map.getView().getRotation() || 0 : 0;\n  }\n\n\n  /**\n   * @return {number|undefined}\n   */\n  getTiltOnGlobe() {\n    const scene = this.ol3d.getCesiumScene();\n    const tiltOnGlobe = computeSignedTiltAngleOnGlobe(scene);\n    return -tiltOnGlobe;\n  }\n\n\n  /**\n   * @param {number} angle\n   */\n  setHeading(angle) {\n    const scene = this.ol3d.getCesiumScene();\n    const bottom = pickBottomPoint(scene);\n    if (bottom) {\n      setHeadingUsingBottomCenter(scene, angle, bottom);\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.OLCesium}\n   */\n  getOl3d() {\n    return this.ol3d;\n  }\n\n  /**\n   * @export\n   * @return {!ol.View}\n   */\n  getOlView() {\n    const view = this.map.getView();\n    console.assert(view);\n    return view;\n  }\n\n  /**\n   * @export\n   * @return {Cesium.Matrix4}\n   */\n  getCesiumViewMatrix() {\n    return this.ol3d.getCesiumScene().camera.viewMatrix;\n  }\n\n  /**\n   * @export\n   * @return {!Cesium.Scene}\n   */\n  getCesiumScene() {\n    return this.ol3d.getCesiumScene();\n  }\n\n  /**\n   * @export\n   * @param {!Cesium.Rectangle} rectangle\n   * @param {number=} offset in meters\n   * @return {Promise<undefined>}\n   */\n  flyToRectangle(rectangle, offset = 0) {\n    const camera = this.getCesiumScene().camera;\n    const destination = camera.getRectangleCameraCoordinates(rectangle);\n\n    const mag = Cesium.Cartesian3.magnitude(destination) + offset;\n    Cesium.Cartesian3.normalize(destination, destination);\n    Cesium.Cartesian3.multiplyByScalar(destination, mag, destination);\n\n    return new Promise((resolve, reject) => {\n      if (!this.cameraExtentInRadians) {\n        reject();\n        return;\n      }\n\n      camera.flyTo({\n        destination,\n        complete: () => resolve(),\n        cancel: () => reject(),\n        endTransform: Cesium.Matrix4.IDENTITY\n      });\n    });\n  }\n\n  /**\n   * @protected\n   * @return {Cesium.Rectangle|undefined}\n   */\n  getCameraExtentRectangle() {\n    if (this.cameraExtentInRadians) {\n      return new Cesium.Rectangle(...this.cameraExtentInRadians);\n    }\n  }\n};\n\n\nexport default Manager;\n","/**\n * @module examples.lazy\n */\nimport {transform} from 'ol/proj.js';\nimport olView from 'ol/View.js';\nimport {defaults as olControlDefaults} from 'ol/control.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olMap from 'ol/Map.js';\nimport olcsContribManager from 'olcs/contrib/Manager.js';\nimport {OLCS_ION_TOKEN} from './_common.js';\n\nconst ol2d = new olMap({\n  layers: [\n    new olLayerTile({\n      source: new olSourceOSM()\n    })\n  ],\n  controls: olControlDefaults({\n    attributionOptions: {\n      collapsible: false\n    }\n  }),\n  target: 'map',\n  view: new olView({\n    center: transform([25, 20], 'EPSG:4326', 'EPSG:3857'),\n    zoom: 3\n  })\n});\n\nwindow['manager'] = new olcsContribManager(window.CESIUM_URL, {\n  map: ol2d,\n  cameraExtentInRadians: [0.0897, 0.7923, 0.2003, 0.8417],\n  cesiumIonDefaultAccessToken: OLCS_ION_TOKEN\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.j = 675;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t675: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkol_cesium\"] = self[\"webpackChunkol_cesium\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [351], () => (__webpack_require__(189)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","LazyLoader","constructor","url","this","promise","url_","load","Promise","resolve","reject","script","document","createElement","onload","onerror","head","appendChild","src","olObservable","cesiumUrl","_temp","map","cameraExtentInRadians","cesiumIonDefaultAccessToken","super","cesiumUrl_","boundingSphere_","promise_","cesiumIonDefaultAccessToken_","ol3d","cesiumInitialTilt_","toRadians","fogDensity","fogSSEFactor","minimumZoomDistance","maximumZoomDistance","limitCameraToBoundingSphereRatio","height","cesiumLazyLoader","olcsContribLazyLoader","then","onCesiumLoaded","rect","Cesium","Rectangle","Camera","DEFAULT_VIEW_RECTANGLE","BoundingSphere","fromRectangle3D","Ellipsoid","WGS84","Ion","defaultAccessToken","instantiateOLCesium","scene","getCesiumScene","configureForUsability","configureForPerformance","dispatchEvent","OLCesium","createWorldTerrain","terrainProvider","createWorldTerrainAsync","tp","fog","enabled","density","screenSpaceErrorFactor","sscController","screenSpaceCameraController","globe","depthTestAgainstTerrain","baseColor","Color","WHITE","backgroundColor","postRender","addEventListener","limitCameraToBoundingSphere","bind","enableAutoRenderLoop","camera","toggle3d","is3DCurrentlyEnabled","getEnabled","resetToNorthZenith","setEnabled","rotateAroundBottomCenter","set3dWithView","lon","lat","elevation","headingDeg","pitchDeg","destination","Cartesian3","fromDegrees","orientation","heading","Math","pitch","roll","setView","is3dEnabled","getHeading","getView","getRotation","getTiltOnGlobe","computeSignedTiltAngleOnGlobe","setHeading","angle","bottom","pickBottomPoint","setHeadingUsingBottomCenter","getOl3d","getOlView","getCesiumViewMatrix","viewMatrix","flyToRectangle","rectangle","offset","getRectangleCameraCoordinates","mag","magnitude","normalize","multiplyByScalar","flyTo","complete","cancel","endTransform","Matrix4","IDENTITY","getCameraExtentRectangle","ol2d","layers","source","controls","attributionOptions","collapsible","target","view","center","zoom","window","CESIUM_URL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","push","__webpack_exports__"],"sourceRoot":""}